import{o as b,u as V,A as R,I as F,s as _,N as A,a as I}from"./keyboard-BpG9qIHi.js";import{c as O,w as B,h as j,i as q,v as Q,N as $,_ as K,O as W}from"./use-tree-walker-Cy9hQhp5.js";import{a0 as k,d as w,W as M,f as T,V as X,D as Y,X as J,Y as Z,n as y}from"./index-DTg46rQC.js";import{t as z,i as P,l as G}from"./open-closed-a7O1JoHo.js";function ee(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function te(){return/Android/gi.test(window.navigator.userAgent)}function ne(){return ee()||te()}function D(t,r,l){O.isServer||k(u=>{document.addEventListener(t,r,l),u(()=>document.removeEventListener(t,r,l))})}function ae(t,r,l){O.isServer||k(u=>{window.addEventListener(t,r,l),u(()=>window.removeEventListener(t,r,l))})}function le(t,r,l=M(()=>!0)){function u(n,e){if(!l.value||n.defaultPrevented)return;let o=e(n);if(o===null||!o.getRootNode().contains(o))return;let v=function g(d){return typeof d=="function"?g(d()):Array.isArray(d)||d instanceof Set?d:[d]}(t);for(let g of v){if(g===null)continue;let d=g instanceof HTMLElement?g:b(g);if(d!=null&&d.contains(o)||n.composed&&n.composedPath().includes(d))return}return!B(o,j.Loose)&&o.tabIndex!==-1&&n.preventDefault(),r(n,o)}let i=w(null);D("pointerdown",n=>{var e,o;l.value&&(i.value=((o=(e=n.composedPath)==null?void 0:e.call(n))==null?void 0:o[0])||n.target)},!0),D("mousedown",n=>{var e,o;l.value&&(i.value=((o=(e=n.composedPath)==null?void 0:e.call(n))==null?void 0:o[0])||n.target)},!0),D("click",n=>{ne()||i.value&&(u(n,()=>i.value),i.value=null)},!0),D("touchend",n=>u(n,()=>n.target instanceof HTMLElement?n.target:null),!0),ae("blur",n=>u(n,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function L(t){return[t.screenX,t.screenY]}function re(){let t=w([-1,-1]);return{wasMoved(r){let l=L(r);return t.value[0]===l[0]&&t.value[1]===l[1]?!1:(t.value=l,!0)},update(r){t.value=L(r)}}}function ue(t){throw new Error("Unexpected object: "+t)}var S=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(S||{});function oe(t,r){let l=r.resolveItems();if(l.length<=0)return null;let u=r.resolveActiveIndex(),i=u??-1;switch(t.focus){case 0:{for(let n=0;n<l.length;++n)if(!r.resolveDisabled(l[n],n,l))return n;return u}case 1:{i===-1&&(i=l.length);for(let n=i-1;n>=0;--n)if(!r.resolveDisabled(l[n],n,l))return n;return u}case 2:{for(let n=i+1;n<l.length;++n)if(!r.resolveDisabled(l[n],n,l))return n;return u}case 3:{for(let n=l.length-1;n>=0;--n)if(!r.resolveDisabled(l[n],n,l))return n;return u}case 4:{for(let n=0;n<l.length;++n)if(r.resolveId(l[n],n,l)===t.id)return n;return u}case 5:return null;default:ue(t)}}let C=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function N(t){var r,l;let u=(r=t.innerText)!=null?r:"",i=t.cloneNode(!0);if(!(i instanceof HTMLElement))return u;let n=!1;for(let o of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))o.remove(),n=!0;let e=n?(l=i.innerText)!=null?l:"":u;return C.test(e)&&(e=e.replace(C,"")),e}function ie(t){let r=t.getAttribute("aria-label");if(typeof r=="string")return r.trim();let l=t.getAttribute("aria-labelledby");if(l){let u=l.split(" ").map(i=>{let n=document.getElementById(i);if(n){let e=n.getAttribute("aria-label");return typeof e=="string"?e.trim():N(n).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return N(t).trim()}function se(t){let r=w(""),l=w("");return()=>{let u=b(t);if(!u)return"";let i=u.innerText;if(r.value===i)return l.value;let n=ie(u).trim().toLowerCase();return r.value=i,l.value=n,n}}var ce=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(ce||{}),ve=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(ve||{});function de(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let H=Symbol("MenuContext");function E(t){let r=Z(H,null);if(r===null){let l=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,E),l}return r}let be=T({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:r,attrs:l}){let u=w(1),i=w(null),n=w(null),e=w([]),o=w(""),v=w(null),g=w(1);function d(a=c=>c){let c=v.value!==null?e.value[v.value]:null,s=W(a(e.value.slice()),h=>b(h.dataRef.domRef)),p=c?s.indexOf(c):null;return p===-1&&(p=null),{items:s,activeItemIndex:p}}let f={menuState:u,buttonRef:i,itemsRef:n,items:e,searchQuery:o,activeItemIndex:v,activationTrigger:g,closeMenu:()=>{u.value=1,v.value=null},openMenu:()=>u.value=0,goToItem(a,c,s){let p=d(),h=oe(a===S.Specific?{focus:S.Specific,id:c}:{focus:a},{resolveItems:()=>p.items,resolveActiveIndex:()=>p.activeItemIndex,resolveId:m=>m.id,resolveDisabled:m=>m.dataRef.disabled});o.value="",v.value=h,g.value=s??1,e.value=p.items},search(a){let c=o.value!==""?0:1;o.value+=a.toLowerCase();let s=(v.value!==null?e.value.slice(v.value+c).concat(e.value.slice(0,v.value+c)):e.value).find(h=>h.dataRef.textValue.startsWith(o.value)&&!h.dataRef.disabled),p=s?e.value.indexOf(s):-1;p===-1||p===v.value||(v.value=p,g.value=1)},clearSearch(){o.value=""},registerItem(a,c){let s=d(p=>[...p,{id:a,dataRef:c}]);e.value=s.items,v.value=s.activeItemIndex,g.value=1},unregisterItem(a){let c=d(s=>{let p=s.findIndex(h=>h.id===a);return p!==-1&&s.splice(p,1),s});e.value=c.items,v.value=c.activeItemIndex,g.value=1}};return le([i,n],(a,c)=>{var s;f.closeMenu(),B(c,j.Loose)||(a.preventDefault(),(s=b(i))==null||s.focus())},M(()=>u.value===0)),X(H,f),z(M(()=>V(u.value,{0:P.Open,1:P.Closed}))),()=>{let a={open:u.value===0,close:f.closeMenu};return R({ourProps:{},theirProps:t,slot:a,slots:r,attrs:l,name:"Menu"})}}}),Ie=T({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:r,slots:l,expose:u}){var i;let n=(i=t.id)!=null?i:`headlessui-menu-button-${F()}`,e=E("MenuButton");u({el:e.buttonRef,$el:e.buttonRef});function o(f){switch(f.key){case I.Space:case I.Enter:case I.ArrowDown:f.preventDefault(),f.stopPropagation(),e.openMenu(),y(()=>{var a;(a=b(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(S.First)});break;case I.ArrowUp:f.preventDefault(),f.stopPropagation(),e.openMenu(),y(()=>{var a;(a=b(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(S.Last)});break}}function v(f){switch(f.key){case I.Space:f.preventDefault();break}}function g(f){t.disabled||(e.menuState.value===0?(e.closeMenu(),y(()=>{var a;return(a=b(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(f.preventDefault(),e.openMenu(),de(()=>{var a;return(a=b(e.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let d=_(M(()=>({as:t.as,type:r.type})),e.buttonRef);return()=>{var f;let a={open:e.menuState.value===0},{...c}=t,s={ref:e.buttonRef,id:n,type:d.value,"aria-haspopup":"menu","aria-controls":(f=b(e.itemsRef))==null?void 0:f.id,"aria-expanded":e.menuState.value===0,onKeydown:o,onKeyup:v,onClick:g};return R({ourProps:s,theirProps:c,slot:a,attrs:r,slots:l,name:"MenuButton"})}}}),he=T({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:r,slots:l,expose:u}){var i;let n=(i=t.id)!=null?i:`headlessui-menu-items-${F()}`,e=E("MenuItems"),o=w(null);u({el:e.itemsRef,$el:e.itemsRef}),q({container:M(()=>b(e.itemsRef)),enabled:M(()=>e.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function v(a){var c;switch(o.value&&clearTimeout(o.value),a.key){case I.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case I.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeItemIndex.value!==null){let s=e.items.value[e.activeItemIndex.value];(c=b(s.dataRef.domRef))==null||c.click()}e.closeMenu(),K(b(e.buttonRef));break;case I.ArrowDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(S.Next);case I.ArrowUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(S.Previous);case I.Home:case I.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(S.First);case I.End:case I.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(S.Last);case I.Escape:a.preventDefault(),a.stopPropagation(),e.closeMenu(),y(()=>{var s;return(s=b(e.buttonRef))==null?void 0:s.focus({preventScroll:!0})});break;case I.Tab:a.preventDefault(),a.stopPropagation(),e.closeMenu(),y(()=>Q(b(e.buttonRef),a.shiftKey?$.Previous:$.Next));break;default:a.key.length===1&&(e.search(a.key),o.value=setTimeout(()=>e.clearSearch(),350));break}}function g(a){switch(a.key){case I.Space:a.preventDefault();break}}let d=G(),f=M(()=>d!==null?(d.value&P.Open)===P.Open:e.menuState.value===0);return()=>{var a,c;let s={open:e.menuState.value===0},{...p}=t,h={"aria-activedescendant":e.activeItemIndex.value===null||(a=e.items.value[e.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(c=b(e.buttonRef))==null?void 0:c.id,id:n,onKeydown:v,onKeyup:g,role:"menu",tabIndex:0,ref:e.itemsRef};return R({ourProps:h,theirProps:p,slot:s,attrs:r,slots:l,features:A.RenderStrategy|A.Static,visible:f.value,name:"MenuItems"})}}}),we=T({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:r,attrs:l,expose:u}){var i;let n=(i=t.id)!=null?i:`headlessui-menu-item-${F()}`,e=E("MenuItem"),o=w(null);u({el:o,$el:o});let v=M(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===n:!1),g=se(o),d=M(()=>({disabled:t.disabled,get textValue(){return g()},domRef:o}));Y(()=>e.registerItem(n,d)),J(()=>e.unregisterItem(n)),k(()=>{e.menuState.value===0&&v.value&&e.activationTrigger.value!==0&&y(()=>{var m,x;return(x=(m=b(o))==null?void 0:m.scrollIntoView)==null?void 0:x.call(m,{block:"nearest"})})});function f(m){if(t.disabled)return m.preventDefault();e.closeMenu(),K(b(e.buttonRef))}function a(){if(t.disabled)return e.goToItem(S.Nothing);e.goToItem(S.Specific,n)}let c=re();function s(m){c.update(m)}function p(m){c.wasMoved(m)&&(t.disabled||v.value||e.goToItem(S.Specific,n,0))}function h(m){c.wasMoved(m)&&(t.disabled||v.value&&e.goToItem(S.Nothing))}return()=>{let{disabled:m,...x}=t,U={active:v.value,disabled:m,close:e.closeMenu};return R({ourProps:{id:n,ref:o,role:"menuitem",tabIndex:m===!0?void 0:-1,"aria-disabled":m===!0?!0:void 0,onClick:f,onFocus:a,onPointerenter:s,onMouseenter:s,onPointermove:p,onMousemove:p,onPointerleave:h,onMouseleave:h},theirProps:{...l,...x},slot:U,attrs:l,slots:r,name:"MenuItem"})}}});export{he as M,Ie as S,we as b,S as c,oe as f,be as g,se as p,re as u,le as w};
