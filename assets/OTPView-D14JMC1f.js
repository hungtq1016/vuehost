import{_ as k}from"./Auth.form.vue_vue_type_script_setup_true_lang-SrMmWmA1.js";import{u as A}from"./useAsyncValidator-D-1iyTRV.js";import{p as B}from"./request.helper-BUxsD2As.js";import{ad as O,a5 as P,ae as T,f as K,o as C,a as N,p as i,P as d,u as t,b as l,l as p,R as $,x as j,h as U,i as D,A as S,a3 as z,a4 as E}from"./index-BC3jgjxj.js";import{r as F}from"./util.object-9m6X7yey.js";import"./index-BMenrDxa.js";const R={n1:"",n2:"",n3:"",n4:"",n5:"",n6:""},r=O({...R}),_={n1:{type:"string",required:!0},n2:{type:"string",required:!0},n3:{type:"string",required:!0},n4:{type:"string",required:!0},n5:{type:"string",required:!0},n6:{type:"string",required:!0}},I=async f=>{const a={otp:r.n1+r.n2+r.n3+r.n4+r.n5+r.n6,email:f},{updateAuthAsync:s}=T();try{const o=await B("/api/authenticate/receive-otp",a);if(o!=null&&o.data){const e=o.data,u=await s(e);return F(r,R),!!u}return!1}catch(o){return P(String(o)),!1}},M={class:"flex items-center justify-between gap-3 pb-10"},G=K({__name:"Auth.otp",setup(f){const{errorFields:a}=A(r,_);function s(o){o=o||window.event;const e=o.which||o.keyCode;e>31&&(e<48||e>57)&&e!==46&&o.preventDefault()}return(o,e)=>{var u,c,b,g,x,m,y,h,w,v,V,q;return C(),N("div",M,[i(l("input",{type:"tel",pattern:"\\d*",maxlength:"1","onUpdate:modelValue":e[0]||(e[0]=n=>t(r).n1=n),onKeypress:e[1]||(e[1]=n=>s(n)),class:p([{"border-red-600":(c=(u=t(a))==null?void 0:u.n1)==null?void 0:c.length},"w-14 h-14 text-center text-2xl font-extrabold text-cerulean-900 bg-cerulean-100 border border-transparent hover:border-cerulean-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-cerulean-600 focus:ring-2 focus:ring-cerulean-300"])},null,34),[[d,t(r).n1]]),i(l("input",{type:"tel",pattern:"\\d*",maxlength:"1","onUpdate:modelValue":e[2]||(e[2]=n=>t(r).n2=n),onKeypress:e[3]||(e[3]=n=>s(n)),class:p([{"border-red-600":(g=(b=t(a))==null?void 0:b.n2)==null?void 0:g.length},"w-14 h-14 text-center text-2xl font-extrabold text-cerulean-900 bg-cerulean-100 border border-transparent hover:border-cerulean-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-cerulean-600 focus:ring-2 focus:ring-cerulean-300"])},null,34),[[d,t(r).n2]]),i(l("input",{type:"tel",pattern:"\\d*",maxlength:"1","onUpdate:modelValue":e[4]||(e[4]=n=>t(r).n3=n),onKeypress:e[5]||(e[5]=n=>s(n)),class:p([{"border-red-600":(m=(x=t(a))==null?void 0:x.n3)==null?void 0:m.length},"w-14 h-14 text-center text-2xl font-extrabold text-cerulean-900 bg-cerulean-100 border border-transparent hover:border-cerulean-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-cerulean-600 focus:ring-2 focus:ring-cerulean-300"])},null,34),[[d,t(r).n3]]),i(l("input",{type:"tel",pattern:"\\d*",maxlength:"1","onUpdate:modelValue":e[6]||(e[6]=n=>t(r).n4=n),onKeypress:e[7]||(e[7]=n=>s(n)),class:p([{"border-red-600":(h=(y=t(a))==null?void 0:y.n4)==null?void 0:h.length},"w-14 h-14 text-center text-2xl font-extrabold text-cerulean-900 bg-cerulean-100 border border-transparent hover:border-cerulean-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-cerulean-600 focus:ring-2 focus:ring-cerulean-300"])},null,34),[[d,t(r).n4]]),i(l("input",{type:"tel",pattern:"\\d*",maxlength:"1","onUpdate:modelValue":e[8]||(e[8]=n=>t(r).n5=n),onKeypress:e[9]||(e[9]=n=>s(n)),class:p([{"border-red-600":(v=(w=t(a))==null?void 0:w.n5)==null?void 0:v.length},"w-14 h-14 text-center text-2xl font-extrabold text-cerulean-900 bg-cerulean-100 border border-transparent hover:border-cerulean-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-cerulean-600 focus:ring-2 focus:ring-cerulean-300"])},null,34),[[d,t(r).n5]]),i(l("input",{type:"tel",pattern:"\\d*",maxlength:"1","onUpdate:modelValue":e[10]||(e[10]=n=>t(r).n6=n),onKeypress:e[11]||(e[11]=n=>s(n)),class:p([{"border-red-600":(q=(V=t(a))==null?void 0:V.n6)==null?void 0:q.length},"w-14 h-14 text-center text-2xl font-extrabold text-cerulean-900 bg-cerulean-100 border border-transparent hover:border-cerulean-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-cerulean-600 focus:ring-2 focus:ring-cerulean-300"])},null,34),[[d,t(r).n6]])])}}}),H={class:"max-w-xs-full"},J={class:"sm:col-span-6"},ee=K({__name:"OTPView",setup(f){const{pass:a}=A(r,_),s=$(),o=j();o.query.email||s.push("/oauth2");const e=async()=>{const{fetchUser:u}=S();await I(String(o.query.email))&&(z(E.global.t("message.login_success")),await u(),s.push("/"))};return(u,c)=>(C(),N("div",H,[U(k,{pass:t(a),submit:e},{default:D(()=>[l("div",J,[U(G)])]),_:1},8,["pass"])]))}});export{ee as default};
