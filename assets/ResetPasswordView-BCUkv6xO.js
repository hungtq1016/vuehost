import{ad as P,a5 as v,f as $,x as q,R as B,D as N,a9 as S,o as b,a as R,h as p,i as u,b as h,u as r,j as _,t as y,a3 as x,a4 as C}from"./index-BC3jgjxj.js";import{_ as D}from"./Auth.form.vue_vue_type_script_setup_true_lang-SrMmWmA1.js";import{_ as g}from"./Auth.input.vue_vue_type_script_setup_true_lang-rf1pOKTW.js";import{u as E}from"./useAsyncValidator-D-1iyTRV.js";import{p as M}from"./request.helper-BUxsD2As.js";import"./v4-CQkTLCs1.js";import"./index-BMenrDxa.js";const T={rePassword:"",password:""},t=P({...T}),U={password:{type:"string",required:!0,message:"Please enter your password again for confirmation"},rePassword:[{type:"string",required:!0,message:"Please enter your password"},{validator:j}]};function j(d,s,i,o,n){s!==o.rePassword?i(new Error("The passwords do not match")):i()}const k=async d=>{try{await M("/api/authenticate/send-reset-password",d).then(s=>!!(s!=null&&s.data))}catch(s){return v(String(s)),!1}},A={class:"max-w-xs w-full"},F={class:"sm:col-span-6"},z={class:"sm:col-span-6"},Q=$({__name:"ResetPasswordView",setup(d){const{pass:s,errorFields:i}=E(t,U),o=q(),n=B();N(()=>{const e={id:o.query.id,email:o.query.email};S("/api/authenticate/email-valid",e).then(a=>{a===void 0&&n.push("/oauth2")})});const V=async()=>{const e={id:String(o.query.id),email:String(o.query.email),password:t.password};await k(e)&&(x(C.global.t("message.update_success")),n.push("/oauth2"))};return(e,a)=>(b(),R("div",A,[p(D,{pass:r(s),submit:V},{default:u(()=>{var m,c,f,w;return[h("div",F,[p(g,{modelValue:r(t).password,"onUpdate:modelValue":a[0]||(a[0]=l=>r(t).password=l),type:"password",placeholder:e.$t("form.place_holder.password"),"has-error":!!((c=(m=r(i))==null?void 0:m.password)!=null&&c.length)},{default:u(()=>[_(y(e.$t("form.password")),1)]),_:1},8,["modelValue","placeholder","has-error"])]),h("div",z,[p(g,{modelValue:r(t).rePassword,"onUpdate:modelValue":a[1]||(a[1]=l=>r(t).rePassword=l),type:"password",placeholder:e.$t("form.place_holder.re_password"),"has-error":!!((w=(f=r(i))==null?void 0:f.rePassword)!=null&&w.length)},{default:u(()=>[_(y(e.$t("form.re_password")),1)]),_:1},8,["modelValue","placeholder","has-error"])])]}),_:1},8,["pass"])]))}});export{Q as default};
