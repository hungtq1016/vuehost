import{u as J}from"./useAsyncValidator-BiKHsQdo.js";import{_ as U,a as D,b as M,c as R}from"./Form.layout.vue_vue_type_script_setup_true_lang-cOmaJ-8J.js";import{_ as O}from"./Form.input.slot.vue_vue_type_script_setup_true_lang-CZC2I28R.js";import{_ as T}from"./Form.radio.vue_vue_type_script_setup_true_lang-C7EF96gB.js";import{i as W,p as C,r as q}from"./schedule-B1P0aOEn.js";import{g as N,p as G}from"./request.helper-DN6JUNty.js";import{d as u,ad as H,a3 as K,w as F,f as L,D as Q,r as X,o as Y,c as Z,i as l,h as r,u as a,j as c,t as f,O as B,a8 as x}from"./index-DTg46rQC.js";import{r as aa}from"./util.object-9m6X7yey.js";import{f as ea}from"./index-B9LkKbxO.js";import{_ as S}from"./Form.select.vue_vue_type_script_setup_true_lang-Ce7tN_9t.js";import{v as ta}from"./vi-EY4sXWwn.js";import"./form-DLmZ15FH.js";import"./keyboard-BpG9qIHi.js";import"./EyeIcon-B-aCzrou.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./enum-CD4clsnU.js";import"./ChevronDownIcon-BlJOeIs2.js";const P={date:new Date,branchId:"-1",desc:"",fullName:"",phoneNumber:"",serviceId:"-1",time:"",email:"-1",enable:!0},V=u(),t=H({...P}),j=u({...W}),k=u([]),_=u(""),$=u(""),A=u([]),z=u([]),oa=ea(async()=>{await E()},600,{maxWait:5e3}),E=async()=>{const e={...C.value,value:$.value};N("/api/users/role/customer/search",e).then(n=>{if(n!=null&&n.data){const{data:i,...s}=n.data;k.value=i,j.value=s}})},la=async()=>{N("/api/services/group/chuyen-khoa?pageNumber=1&pageSize=20&enable=1").then(e=>{e!=null&&e.data&&(A.value=e.data.data)})},ra=async()=>{N("/api/branches").then(e=>{e!=null&&e.data&&(z.value=e.data)})},na=async()=>{t.desc="Bác sĩ cập nhật",G("/api/schedules",t).then(e=>{e!=null&&e.data&&(K(e.message),aa(t,P))}).finally(()=>{_.value=""})};F(V,e=>{t.time=JSON.stringify(e)},{deep:!0});F(_,e=>{const n=k.value.find(i=>i.id===e);n!==void 0&&(t.email=n.email,t.fullName=n.fullName,t.phoneNumber=n.phoneNumber)});const Na=L({__name:"ScheduleAddView",setup(e){const{pass:n,errorFields:i}=J(t,q);return Q(async()=>{await E(),await ra(),await la()}),(s,o)=>{const w=X("VueDatePicker");return Y(),Z(R,{submit:a(na)},{default:l(()=>[r(U,null,{default:l(()=>{var p,h,d,b;return[r(D,{"has-error":[!!((h=(p=a(i))==null?void 0:p.time)!=null&&h.length),!!((b=(d=a(i))==null?void 0:d.date)!=null&&b.length)]},{heading:l(()=>[c(f(s.$t("form.heading")),1)]),content:l(()=>{var v,g,m,I;return[r(O,{"has-error":!!((g=(v=a(i))==null?void 0:v.date)!=null&&g.length)},{label:l(()=>[c(f(s.$t("form.pick_date")),1)]),content:l(()=>[r(w,{modelValue:a(t).date,"onUpdate:modelValue":o[0]||(o[0]=y=>a(t).date=y),"min-date":new Date,"format-locale":a(ta),format:"E",class:"!block",inline:"","multi-calendars":"","auto-apply":""},null,8,["modelValue","min-date","format-locale"])]),_:1},8,["has-error"]),r(O,{"has-error":!!((I=(m=a(i))==null?void 0:m.time)!=null&&I.length)},{label:l(()=>[c(f(s.$t("form.pick_time")),1)]),content:l(()=>[r(w,{modelValue:a(V),"onUpdate:modelValue":o[1]||(o[1]=y=>B(V)?V.value=y:null),"time-picker":"","auto-apply":"",inline:"",class:"!block"},null,8,["modelValue"])]),_:1},8,["has-error"])]}),_:1},8,["has-error"])]}),_:1}),r(U,null,{default:l(()=>{var p,h;return[r(M,{modelValue:a(t).enable,"onUpdate:modelValue":o[2]||(o[2]=d=>a(t).enable=d),pass:a(n)},null,8,["modelValue","pass"]),r(D,{"has-error":[!!((h=(p=a(i))==null?void 0:p.userId)!=null&&h.length)]},{heading:l(()=>[c(f(s.$t("form.customer")),1)]),content:l(()=>{var d,b,v,g;return[r(S,{modelValue:a(t).serviceId,"onUpdate:modelValue":o[3]||(o[3]=m=>a(t).serviceId=m),list:a(A),"has-error":!!((b=(d=a(i))==null?void 0:d.serviceId)!=null&&b.length),placeholder:s.$t("form.place_holder.service")},{default:l(()=>[c(f(s.$t("form.select_service")),1)]),_:1},8,["modelValue","list","has-error","placeholder"]),r(S,{modelValue:a(t).branchId,"onUpdate:modelValue":o[4]||(o[4]=m=>a(t).branchId=m),list:a(z),"has-error":!!((g=(v=a(i))==null?void 0:v.branchId)!=null&&g.length),placeholder:s.$t("form.place_holder.branch")},{default:l(()=>[c(f(s.$t("form.select_branch")),1)]),_:1},8,["modelValue","list","has-error","placeholder"]),r(T,x({"onUpdate:search":[a(oa),o[6]||(o[6]=m=>B($)?$.value=m:null)],id:a(_),"onUpdate:id":o[5]||(o[5]=m=>B(_)?_.value=m:null),search:a($),list:a(k)},{pagination:a(j),paginationOptions:a(C)}),null,16,["onUpdate:search","id","search","list"])]}),_:1},8,["has-error"])]}),_:1})]),_:1},8,["submit"])}}});export{Na as default};
