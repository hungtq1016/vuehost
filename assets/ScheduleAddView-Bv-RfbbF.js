import{u as S}from"./useAsyncValidator-CvlvEwpL.js";import{_ as B,a as N,b as j,c as A}from"./Form.layout.vue_vue_type_script_setup_true_lang-CPRpQ6ZQ.js";import{_ as U}from"./Form.input.slot.vue_vue_type_script_setup_true_lang-DtddyGCv.js";import{_ as x}from"./Form.radio.vue_vue_type_script_setup_true_lang-DEGnesDK.js";import{i as E,p as O,r as J}from"./schedule-DCqmlXCI.js";import{g as M,p as R}from"./request.helper-D1MGDj_g.js";import{d as c,ad as T,a3 as W,w as q,f as z,D as G,r as H,o as K,c as L,i as e,h as o,u as a,j as h,t as d,b as Q,O as D,aa as X}from"./index-Cz9B68HP.js";import{r as Y}from"./util.object-9m6X7yey.js";import{f as Z}from"./index--rcVdR2e.js";import{v as aa}from"./vi-wtEGj-yP.js";import"./form-aYMBd3ty.js";import"./keyboard-BOI6BuMK.js";import"./EyeIcon-ByucquJJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./enum-CD4clsnU.js";const C={date:new Date,branchId:"-1",desc:"",fullName:"",phoneNumber:"",serviceId:"-1",time:"",email:"-1",enable:!0},_=c(),n=T({...C}),F=c({...E}),I=c([]),g=c(""),ea=Z(async()=>{await P()},600,{maxWait:5e3}),P=async()=>{const s={...O.value,value:g.value};M("/api/users/role/customer/search",s).then(l=>{if(l!=null&&l.data){const{data:i,...p}=l.data;I.value=i,F.value=p}})},ta=async()=>{const s=await R("/api/schedules",n);s!=null&&s.data&&(W(s.message),Y(n,C))};q(_,s=>{n.time=JSON.stringify(s)},{deep:!0});const ba=z({__name:"ScheduleAddView",setup(s){const{pass:l,errorFields:i}=S(n,J),p=c("");return G(async()=>{await P()}),(f,t)=>{const V=H("VueDatePicker");return K(),L(A,{submit:a(ta)},{default:e(()=>[o(B,null,{default:e(()=>{var m,u,r,v;return[o(N,{"has-error":[!!((u=(m=a(i))==null?void 0:m.time)!=null&&u.length),!!((v=(r=a(i))==null?void 0:r.date)!=null&&v.length)]},{heading:e(()=>[h(d(f.$t("form.heading")),1)]),content:e(()=>{var $,k,y,w;return[Q("div",null,d(a(n)),1),o(U,{"has-error":!!((k=($=a(i))==null?void 0:$.date)!=null&&k.length)},{label:e(()=>[h(d(f.$t("form.pick_date")),1)]),content:e(()=>[o(V,{modelValue:a(n).date,"onUpdate:modelValue":t[0]||(t[0]=b=>a(n).date=b),"format-locale":a(aa),format:"E",class:"!block",inline:"","multi-calendars":"","auto-apply":""},null,8,["modelValue","format-locale"])]),_:1},8,["has-error"]),o(U,{"has-error":!!((w=(y=a(i))==null?void 0:y.time)!=null&&w.length)},{label:e(()=>[h(d(f.$t("form.pick_time")),1)]),content:e(()=>[o(V,{modelValue:a(_),"onUpdate:modelValue":t[1]||(t[1]=b=>D(_)?_.value=b:null),"time-picker":"","auto-apply":"",inline:"",class:"!block"},null,8,["modelValue"])]),_:1},8,["has-error"])]}),_:1},8,["has-error"])]}),_:1}),o(B,null,{default:e(()=>{var m,u;return[o(j,{modelValue:a(n).enable,"onUpdate:modelValue":t[2]||(t[2]=r=>a(n).enable=r),pass:a(l)},null,8,["modelValue","pass"]),o(N,{"has-error":[!!((u=(m=a(i))==null?void 0:m.userId)!=null&&u.length)]},{heading:e(()=>[h(d(f.$t("form.customer")),1)]),content:e(()=>[o(x,X({"onUpdate:search":[a(ea),t[4]||(t[4]=r=>D(g)?g.value=r:null)],id:p.value,"onUpdate:id":t[3]||(t[3]=r=>p.value=r),search:a(g),list:a(I)},{pagination:a(F),paginationOptions:a(O)}),null,16,["onUpdate:search","id","search","list"])]),_:1},8,["has-error"])]}),_:1})]),_:1},8,["submit"])}}});export{ba as default};
