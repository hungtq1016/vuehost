import{o,a as n,b as e,f as y,aB as V,aC as C,d as c,W as B,w as L,c as M,i as b,j as N,t as u,h as p,u as m,m as _,B as U,a3 as $,ac as j}from"./index-BC3jgjxj.js";import{u as I}from"./request.helper-BUxsD2As.js";import{a as F}from"./Form.layout.vue_vue_type_script_setup_true_lang-BB3z9VPA.js";function Z(i,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06l-3.22-3.22V16.5a.75.75 0 0 1-1.5 0V4.81L8.03 8.03a.75.75 0 0 1-1.06-1.06l4.5-4.5ZM3 15.75a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function D(i,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function E(i,l){return o(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const H={class:"text-black-1000 mb-3 block text-sm font-medium dark:text-white"},R={class:"flex gap-x-2 items-center"},q={for:"image-upload",class:"flex-1 basis-1/3"},O=["disabled"],P={class:"bg-cerulean-600 flex justify-center rounded px-6 py-2 font-medium text-cerulean-100 cursor-pointer hover:bg-opacity-90 dark:bg-cerulean-500 dark:text-cerulean-50 peer-disabled:!bg-cerulean-100 peer-disabled:!text-cerulean-600 peer-disabled:cursor-default"},S=["disabled"],T=["disabled"],W={key:0},z={key:0},A={class:"text-black-1000 mb-3 block text-sm font-medium dark:text-white"},G=["src"],X=y({__name:"ImageView",props:V({hasError:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const l=C(i,"modelValue"),f=c(null),s=c(null),h=c(0),r=c(""),d=B(()=>r.value.length!==0),x=a=>{var v,g;const t=a.target;!t||!((v=t.files)!=null&&v[0])||(s.value=(g=t.files)==null?void 0:g[0],r.value=URL.createObjectURL(s.value))};async function w(){if(!s.value)return;const a=new FormData;a.append("file",s.value);const t=await I("/api/images",a);t!=null&&t.data?(l.value=t.data.data.path,$("Uploaded")):j("Cannot upload")}const k=()=>{s.value=null,f.value=null,r.value=""};return L(l,a=>{r.value=a}),(a,t)=>(o(),M(F,{"has-error":a.hasError},{heading:b(()=>[N(u(a.$t("form.image")),1)]),content:b(()=>[e("div",null,[e("label",H,u(a.$t("form.upload_image")),1),e("div",R,[e("label",q,[e("input",{id:"image-upload",type:"file",disabled:d.value,onChange:x,accept:"image/*",ref_key:"fileInput",ref:f,multiple:"",class:"hidden peer"},null,40,O),e("div",P,[p(m(D),{class:"w-5 h-5"})])]),e("button",{onClick:k,disabled:!d.value,class:"bg-cerulean-600 text-cerulean-100 flex justify-center rounded px-6 py-2 font-medium hover:bg-opacity-90 flex-1 basis-1/3 dark:bg-cerulean-500 dark:text-cerulean-50 disabled:!bg-cerulean-100 disabled:!text-cerulean-600",type:"button"},[p(m(E),{class:"w-5 h-5"})],8,S),e("button",{onClick:w,disabled:!d.value,class:"bg-cerulean-600 text-cerulean-100 flex justify-center rounded px-6 py-2 font-medium hover:bg-opacity-90 flex-1 basis-1/3 dark:bg-cerulean-500 dark:text-cerulean-50 disabled:!bg-cerulean-100 disabled:!text-cerulean-600",type:"button"},[p(m(Z),{class:"w-5 h-5"})],8,T)]),h.value?(o(),n("div",W,"Upload progress: "+u(h.value)+"%",1)):_("",!0)]),d.value?(o(),n("div",z,[e("label",A,u(a.$t("form.review_image")),1),e("img",{src:l.value?m(U)(r.value):r.value,alt:"review-image"},null,8,G)])):_("",!0)]),_:1},8,["has-error"]))}});export{X as _};
